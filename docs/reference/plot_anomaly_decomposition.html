<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Visualize the time series decomposition with anomalies shown — plot_anomaly_decomposition • anomalize</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Visualize the time series decomposition with anomalies shown — plot_anomaly_decomposition" />

<meta property="og:description" content="Visualize the time series decomposition with anomalies shown" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76139189-1', 'auto');
  ga('send', 'pageview');

</script>



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">anomalize</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/anomalize_quick_start_guide.html">Anomalize Quick Start Guide</a>
    </li>
    <li>
      <a href="../articles/anomalize_methods.html">Anomalize Methods</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/business-science/anomalize">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Visualize the time series decomposition with anomalies shown</h1>
    <small>Source: <a href='https://github.com/business-science/anomalize/blob/master/R/plot_anomaly_decomposition.R'><code>R/plot_anomaly_decomposition.R</code></a></small>
    </div>

    
    <p>Visualize the time series decomposition with anomalies shown</p>
    

    <pre class="usage"><span class='fu'>plot_anomaly_decomposition</span>(<span class='no'>data</span>, <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>color_no</span> <span class='kw'>=</span> <span class='st'>"#2c3e50"</span>,
  <span class='kw'>color_yes</span> <span class='kw'>=</span> <span class='st'>"#e31a1c"</span>, <span class='kw'>alpha_dots</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>alpha_circles</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>size_dots</span> <span class='kw'>=</span> <span class='fl'>1.5</span>, <span class='kw'>size_circles</span> <span class='kw'>=</span> <span class='fl'>4</span>, <span class='kw'>strip.position</span> <span class='kw'>=</span> <span class='st'>"right"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A <code>tibble</code> or <code>tbl_time</code> object.</p></td>
    </tr>
    <tr>
      <th>ncol</th>
      <td><p>Number of columns to display. Set to 1 for single column by default.</p></td>
    </tr>
    <tr>
      <th>color_no</th>
      <td><p>Color for non-anomalous data.</p></td>
    </tr>
    <tr>
      <th>color_yes</th>
      <td><p>Color for anomalous data.</p></td>
    </tr>
    <tr>
      <th>alpha_dots</th>
      <td><p>Controls the transparency of the dots. Reduce when too many dots on the screen.</p></td>
    </tr>
    <tr>
      <th>alpha_circles</th>
      <td><p>Controls the transparency of the circles that identify anomalies.</p></td>
    </tr>
    <tr>
      <th>size_dots</th>
      <td><p>Controls the size of the dots.</p></td>
    </tr>
    <tr>
      <th>size_circles</th>
      <td><p>Controls the size of the circles that identify anomalies.</p></td>
    </tr>
    <tr>
      <th>strip.position</th>
      <td><p>Controls the placement of the strip that identifies the time series decomposition components.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a <code>ggplot</code> object.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The first step in reviewing the anomaly detection process is to evaluate
a single times series to observe how the algorithm is selecting anomalies.
The <code>plot_anomaly_decomposition()</code> function is used to gain
an understanding as to whether or not the method is detecting anomalies correctly and
whether or not parameters such as decomposition method, anomalize method,
alpha, frequency, and so on should be adjusted.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='plot_anomalies.html'>plot_anomalies()</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)

<span class='fu'>data</span>(<span class='no'>tidyverse_cran_downloads</span>)

<span class='no'>tidyverse_cran_downloads</span> <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/filter.html'>filter</a></span>(<span class='no'>package</span> <span class='kw'>==</span> <span class='st'>"tidyquant"</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span>() <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='time_decompose.html'>time_decompose</a></span>(<span class='no'>count</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"stl"</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='anomalize.html'>anomalize</a></span>(<span class='no'>remainder</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"iqr"</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'>plot_anomaly_decomposition</span>()</div><div class='output co'>#&gt; <span class='message'>frequency = 7 days</span></div><div class='output co'>#&gt; <span class='message'>trend = 91 days</span></div><div class='img'><img src='plot_anomaly_decomposition-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Matt Dancho, Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

